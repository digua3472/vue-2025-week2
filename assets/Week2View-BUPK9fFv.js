import{r as s,f as I,c as i,a as o,w as r,e as m,d as C,v as d,t as u,F as f,b as D,o as p}from"./index-CTcGqSeF.js";const F={key:0},z={key:1},A={key:2},B={for:""},v="https://todolist-api.hexschool.io",R={__name:"Week2View",setup(N){const e=s({email:"",password:"",nickname:""}),w=s(""),U=async()=>{try{const n=await axios.post(`${v}/users/sign_up`,e.value);console.log(n),w.value=n.data.uid}catch(n){console.log("錯誤"),console.log(n)}},a=s({email:"",password:""}),x=s(""),T=async()=>{try{const n=await axios.post(`${v}/users/sign_in`,a.value);console.log(n),x.value=n.data.token,document.cookie=`customTodoToken=${n.data.token};path=/`}catch(n){console.log("錯誤"),console.log(n)}},g=s({nickname:"",uid:""}),k=s('document.cookie.replace(/(?:^|.*;s*)customTodoTokens*=s*([^;]*).*$/i,"$1")');I(async()=>{const n=await axios.get(`${v}/users/checkout`,{headers:{Authorization:k.value}});g.value=n.data});const b=s([]),V=async()=>{try{const n=await axios.get(`${v}/todos`,{headers:{Authorization:k.value}});console.log(n),b.value=n.data.data}catch(n){console.log("錯誤"),console.log(n)}},y=s({content:""}),$=async()=>{try{const n=await axios.post(`${v}/todos`,y.value,{headers:{Authorization:k.value}});console.log(n),V()}catch(n){console.log("錯誤"),console.log(n)}};return(n,l)=>(p(),i(f,null,[l[12]||(l[12]=o("h2",null,"註冊",-1)),l[13]||(l[13]=o("label",{for:"sign-up-account"},"帳號",-1)),r(o("input",{type:"email",name:"email",id:"sign-up-account",placeholder:"email","onUpdate:modelValue":l[0]||(l[0]=t=>e.value.email=t)},null,512),[[d,e.value.email]]),l[14]||(l[14]=o("br",null,null,-1)),l[15]||(l[15]=o("label",{for:"sign-up-password"},"密碼",-1)),r(o("input",{type:"text",name:"password",id:"sign-up-password",placeholder:"password","onUpdate:modelValue":l[1]||(l[1]=t=>e.value.password=t)},null,512),[[d,e.value.password]]),l[16]||(l[16]=o("br",null,null,-1)),l[17]||(l[17]=o("label",{for:"sign-up-nickname"},"暱稱",-1)),r(o("input",{type:"text",name:"nickname",id:"sign-up-nickname",placeholder:"nickname","onUpdate:modelValue":l[2]||(l[2]=t=>e.value.nickname=t)},null,512),[[d,e.value.nickname]]),l[18]||(l[18]=o("br",null,null,-1)),o("button",{type:"button",onClick:U},"註冊"),l[19]||(l[19]=o("br",null,null,-1)),m(" "+u(e.value)+" ",1),l[20]||(l[20]=o("br",null,null,-1)),m(" UID: "+u(w.value)+" ",1),l[21]||(l[21]=o("h2",null,"登入",-1)),l[22]||(l[22]=o("label",{for:"sign-in-account"},"帳號",-1)),r(o("input",{type:"email",name:"email",id:"sign-in-account",placeholder:"email","onUpdate:modelValue":l[3]||(l[3]=t=>a.value.email=t)},null,512),[[d,a.value.email]]),l[23]||(l[23]=o("br",null,null,-1)),l[24]||(l[24]=o("label",{for:"sign-in-password"},"密碼",-1)),r(o("input",{type:"text",name:"password",id:"sign-in-password",placeholder:"password","onUpdate:modelValue":l[4]||(l[4]=t=>a.value.password=t)},null,512),[[d,a.value.password]]),l[25]||(l[25]=o("br",null,null,-1)),o("button",{type:"button",onClick:T},"登入"),l[26]||(l[26]=o("br",null,null,-1)),m(" "+u(a.value)+" ",1),l[27]||(l[27]=o("br",null,null,-1)),m(" Token: "+u(x.value)+" ",1),l[28]||(l[28]=o("h2",null,"驗證",-1)),g.value.uid?(p(),i("div",F,[o("p",null,"UID: "+u(g.value.uid),1),o("p",null,"nickname: "+u(g.value.nickname),1)])):(p(),i("div",z,l[6]||(l[6]=[o("p",null,"你還沒有登入",-1)]))),l[29]||(l[29]=o("hr",null,null,-1)),l[30]||(l[30]=o("h2",null,"待辦事項",-1)),k.value?(p(),i("div",A,[l[8]||(l[8]=o("label",{for:"add-todo"},"新增待辦事項",-1)),l[9]||(l[9]=o("br",null,null,-1)),r(o("input",{type:"text",id:"add-todo","onUpdate:modelValue":l[5]||(l[5]=t=>y.value.content=t)},null,512),[[d,y.value.content]]),o("button",{type:"button",onClick:$},"新增"),l[10]||(l[10]=o("br",null,null,-1)),l[11]||(l[11]=o("h3",null,"待辦清單",-1)),(p(!0),i(f,null,D(b.value,t=>(p(),i("div",{key:t.id},[l[7]||(l[7]=o("input",{type:"checkbox",name:"",id:""},null,-1)),o("label",B,u(),1)]))),128)),m(" "+u(b.value),1)])):C("",!0)],64))}};export{R as default};
